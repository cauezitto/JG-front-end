{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\cauezitto\\\\Documents\\\\projetos\\\\JG\\\\front-end\\\\src\\\\context\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport handleCartStorage from 'utils/handleCart';\nimport { useCookies } from 'react-cookie';\nvar Context = /*#__PURE__*/createContext(null);\n\nvar StatesProvider = function StatesProvider(_ref) {\n  _s();\n\n  var children = _ref.children;\n\n  var _useState = useState(''),\n      server = _useState[0],\n      setServer = _useState[1];\n\n  var _useState2 = useState({\n    products: [],\n    total: 0\n  }),\n      cart = _useState2[0],\n      setCart = _useState2[1];\n\n  var _useState3 = useState(null),\n      token = _useState3[0],\n      setToken = _useState3[1];\n\n  var _useState4 = useState(null),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  var _useState5 = useState(true),\n      isLoading = _useState5[0],\n      setIsLoading = _useState5[1];\n\n  var _useCookies = useCookies(['user']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookie = _useCookies2[0],\n      setCookie = _useCookies2[1];\n\n  useEffect(function () {\n    if (!isLoading) {\n      handleCartStorage.addToCart(cart);\n      setCookie('cart', cart, {\n        path: '/',\n        maxAge: 604800,\n        // Expires after 1hr\n        sameSite: true\n      });\n    }\n  }, [cart]);\n  useEffect(function () {\n    setIsLoading(false);\n    setCart(handleCartStorage.getCart());\n    setUser(cookie.user);\n    setCookie('cart', handleCartStorage.getCart(), {\n      path: '/',\n      maxAge: 604800,\n      // Expires after 1hr\n      sameSite: true\n    });\n    setServer(process.env.NEXT_PUBLIC_SERVER_HOST ? process.env.NEXT_PUBLIC_SERVER_HOST : '');\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: {\n      server: server,\n      token: token,\n      setToken: setToken,\n      user: user,\n      setUser: setUser,\n      cart: cart,\n      setCart: setCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(StatesProvider, \"oiru5+Ogt8D8onhf+ASeCCcV8qU=\", false, function () {\n  return [useCookies];\n});\n\n_c = StatesProvider;\nexport default StatesProvider;\nexport var useStateContext = function useStateContext() {\n  _s2();\n\n  var context = useContext(Context);\n\n  if (!context) {\n    throw new Error('Use count precisa estar dentro de um provider');\n  }\n\n  var server = context.server,\n      token = context.token,\n      setToken = context.setToken,\n      user = context.user,\n      setUser = context.setUser,\n      cart = context.cart,\n      setCart = context.setCart;\n  return {\n    server: server,\n    token: token,\n    setToken: setToken,\n    user: user,\n    setUser: setUser,\n    cart: cart,\n    setCart: setCart\n  };\n};\n\n_s2(useStateContext, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"StatesProvider\");","map":{"version":3,"sources":["C:/Users/cauezitto/Documents/projetos/JG/front-end/src/context/index.tsx"],"names":["createContext","useContext","useState","useEffect","handleCartStorage","useCookies","Context","StatesProvider","children","server","setServer","products","total","cart","setCart","token","setToken","user","setUser","isLoading","setIsLoading","cookie","setCookie","addToCart","path","maxAge","sameSite","getCart","process","env","NEXT_PUBLIC_SERVER_HOST","useStateContext","context","Error"],"mappings":"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","sourcesContent":["import { createContext, useContext, useState, useEffect } from 'react'\nimport CartProps from 'types/CartProps'\nimport UserProps from 'types/UserProps'\nimport handleCartStorage from 'utils/handleCart'\nimport { useCookies } from 'react-cookie'\n\ntype SetValue = (value: any) => void\ntype SetUserValue = (value: UserProps | null) => void\ntype SetTokenValue = (value: string | null) => void\ninterface ContextProps {\n  cart: CartProps\n  setCart: SetValue\n  user: UserProps | null\n  setUser: SetUserValue\n  token: string | null\n  setToken: SetTokenValue\n  server: string\n}\nconst Context = createContext<ContextProps | null>(null)\n\nconst StatesProvider: React.FC = ({ children }) => {\n  const [server, setServer] = useState('')\n  const [cart, setCart] = useState<CartProps>({\n    products: [],\n    total: 0\n  })\n  const [token, setToken] = useState<string | null>(null)\n  const [user, setUser] = useState<UserProps | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [cookie, setCookie] = useCookies(['user'])\n\n  useEffect(() => {\n    if (!isLoading) {\n      handleCartStorage.addToCart(cart)\n      setCookie('cart', cart, {\n        path: '/',\n        maxAge: 604800, // Expires after 1hr\n        sameSite: true\n      })\n    }\n  }, [cart])\n\n  useEffect(() => {\n    setIsLoading(false)\n    setCart(handleCartStorage.getCart())\n    setUser(cookie.user)\n    setCookie('cart', handleCartStorage.getCart(), {\n      path: '/',\n      maxAge: 604800, // Expires after 1hr\n      sameSite: true\n    })\n\n    setServer(\n      process.env.NEXT_PUBLIC_SERVER_HOST\n        ? process.env.NEXT_PUBLIC_SERVER_HOST\n        : ''\n    )\n  }, [])\n\n  return (\n    <Context.Provider\n      value={{ server, token, setToken, user, setUser, cart, setCart }}\n    >\n      {children}\n    </Context.Provider>\n  )\n}\n\nexport default StatesProvider\n\nexport const useStateContext = () => {\n  const context = useContext(Context)\n  if (!context) {\n    throw new Error('Use count precisa estar dentro de um provider')\n  }\n\n  const { server, token, setToken, user, setUser, cart, setCart } = context\n\n  return { server, token, setToken, user, setUser, cart, setCart }\n}\n"]},"metadata":{},"sourceType":"module"}