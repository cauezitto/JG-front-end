{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\cauezitto\\\\Documents\\\\projetos\\\\JG\\\\front-end\\\\src\\\\pages\\\\login.tsx\";\nimport Button from 'components/Button';\nimport Heading from 'components/Heading';\nimport Input from 'components/Input';\nimport Label from 'components/Label';\nimport Link from 'components/Link';\nimport Container from 'styles/pages/Login';\nimport { useState } from 'react';\nimport api from 'services/api';\nimport { useStateContext } from 'context';\nimport { useRouter } from 'next/router';\nimport { useCookies } from 'react-cookie';\n\nconst Login = () => {\n  const {\n    0: login,\n    1: setLogin\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const {\n    0: remenber,\n    1: setRemenber\n  } = useState(false);\n  const {\n    token,\n    setToken,\n    setUser\n  } = useStateContext();\n  const [cookie, setCookie] = useCookies(['user']);\n  const router = useRouter();\n\n  const send = async e => {\n    e.preventDefault();\n    await api.post('/auth/local', {\n      identifier: login,\n      password\n    }).then(response => {\n      var _user$foto;\n\n      console.log(response.data);\n      const {\n        data\n      } = response;\n      const {\n        user\n      } = data;\n      console.log(user);\n      const userData = {\n        username: user.username,\n        email: user.email,\n        phone: user.phone,\n        endereco: user.endereco,\n        foto: (_user$foto = user.foto) === null || _user$foto === void 0 ? void 0 : _user$foto.url,\n        favorites: user.favoritos.produtos.map(produto => produto.id)\n      };\n      setToken(data.jwt);\n      setUser(userData);\n\n      if (remenber) {\n        setCookie('token', data.jwt, {\n          path: '/',\n          maxAge: 604800,\n          // Expires after 1hr\n          sameSite: true\n        });\n        setCookie('user', userData, {\n          path: '/',\n          maxAge: 604800,\n          // Expires after 1hr\n          sameSite: true\n        });\n      } else {\n        setCookie('token', data.jwt, {\n          path: '/',\n          sameSite: true,\n          maxAge: 86400\n        });\n        setCookie('user', userData, {\n          path: '/',\n          sameSite: true,\n          maxAge: 86400\n        });\n      }\n\n      router.push('/dashboard/pedidos');\n    }).catch(err => {\n      console.log(err);\n      alert('confira seus dados e tente novamente');\n    });\n  };\n\n  const changeRemenber = () => {\n    setRemenber(!remenber);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sub-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"subscribe-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo\" // onClick={() => {\n          //   router.push('/')\n          // }}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"people\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/img/login/player.svg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"subscribe\",\n          children: [/*#__PURE__*/_jsxDEV(Heading, {\n            margin: \"50px 0 0 0\",\n            color: \"black\",\n            font: \"ubuntu\",\n            fontWeight: \"normal\",\n            fontSize: \"xxxmax\",\n            textAlign: \"right\",\n            lineBottom: false,\n            role: \"h2\",\n            children: \"Novo aqui?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/cadastro\",\n            fontWeight: \"semiBold\",\n            color: \"brown\",\n            font: \"ubuntu\",\n            fontSize: \"xxmax\",\n            textAlign: \"right\",\n            justify: \"flex-end\",\n            children: \"Fa\\xE7a seu cadastro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/img/logo3.png\",\n          alt: \"JG\",\n          className: \"logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Heading, {\n          color: \"white100\",\n          font: \"ubuntu\",\n          justify: \"center\",\n          fontWeight: \"bold\",\n          lineBottom: false,\n          fontSize: \"extra\",\n          margin: \"50px 0\",\n          children: \"BEM - VINDO!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: send,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login\",\n            children: /*#__PURE__*/_jsxDEV(Label, {\n              color: \"white100\",\n              font: \"ubuntu\",\n              fontWeight: \"semiBold\",\n              fontSize: \"large\",\n              children: [\"\\xA0 LOGIN\", /*#__PURE__*/_jsxDEV(Input, {\n                margin: \"10px 0\",\n                radius: 50,\n                height: 50,\n                borderColor: \"white100\",\n                value: login,\n                onChange: e => setLogin(e.target.value.toLowerCase())\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"password\",\n            children: /*#__PURE__*/_jsxDEV(Label, {\n              color: \"white100\",\n              font: \"ubuntu\",\n              fontWeight: \"semiBold\",\n              fontSize: \"large\",\n              children: [\"\\xA0 SENHA\", /*#__PURE__*/_jsxDEV(Input, {\n                margin: \"10px 0\",\n                radius: 50,\n                height: 50,\n                borderColor: \"white100\",\n                value: password,\n                type: \"password\",\n                onChange: e => setPassword(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"remenber\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"remenber\",\n              id: \"remenber-check-box\",\n              onChange: changeRemenber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this), \"\\xA0 \\xA0 lembrar\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"forgeted\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              href: \"/recuperar-senha\",\n              color: \"white100\",\n              font: \"ubuntu\",\n              fontSize: \"small\",\n              children: \"Esqueci minha senha\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"send\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              radius: 50,\n              fontSize: \"xlarge\",\n              fontWeight: \"semiBold\",\n              fill: \"yellow300\",\n              color: \"black\",\n              children: \"ENVIAR\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"subscribe-mobile\",\n        children: [\"Novo aqui?\", /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/cadastro\",\n          color: \"brown\",\n          fontSize: \"xlarge\",\n          fontWeight: \"semiBold\",\n          children: \"\\xA0 Se inscreva!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/cauezitto/Documents/projetos/JG/front-end/src/pages/login.tsx"],"names":["Button","Heading","Input","Label","Link","Container","useState","api","useStateContext","useRouter","useCookies","Login","login","setLogin","password","setPassword","remenber","setRemenber","token","setToken","setUser","cookie","setCookie","router","send","e","preventDefault","post","identifier","then","response","console","log","data","user","userData","username","email","phone","endereco","foto","url","favorites","favoritos","produtos","map","produto","id","jwt","path","maxAge","sameSite","push","catch","err","alert","changeRemenber","target","value","toLowerCase"],"mappings":"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","sourcesContent":["import Button from 'components/Button'\nimport Heading from 'components/Heading'\nimport Input from 'components/Input'\nimport Label from 'components/Label'\nimport Link from 'components/Link'\nimport Image from 'next/image'\nimport Container from 'styles/pages/Login'\nimport { FormEvent, useState } from 'react'\nimport api from 'services/api'\nimport { useStateContext } from 'context'\nimport { useRouter } from 'next/router'\n\nimport { useCookies } from 'react-cookie'\nimport { ProductProps } from 'types/ProductProps'\n\nconst Login = () => {\n  const [login, setLogin] = useState('')\n  const [password, setPassword] = useState('')\n  const [remenber, setRemenber] = useState(false)\n  const { token, setToken, setUser } = useStateContext()\n  const [cookie, setCookie] = useCookies(['user'])\n  const router = useRouter()\n\n  const send = async (e: FormEvent) => {\n    e.preventDefault()\n    await api\n      .post('/auth/local', {\n        identifier: login,\n        password\n      })\n      .then((response) => {\n        console.log(response.data)\n        const { data } = response\n        const { user } = data\n\n        console.log(user)\n\n        const userData = {\n          username: user.username,\n          email: user.email,\n          phone: user.phone,\n          endereco: user.endereco,\n          foto: user.foto?.url,\n          favorites: user.favoritos.produtos.map(\n            (produto: ProductProps) => produto.id\n          )\n        }\n\n        setToken(data.jwt)\n        setUser(userData)\n        if (remenber) {\n          setCookie('token', data.jwt, {\n            path: '/',\n            maxAge: 604800, // Expires after 1hr\n            sameSite: true\n          })\n          setCookie('user', userData, {\n            path: '/',\n            maxAge: 604800, // Expires after 1hr\n            sameSite: true\n          })\n        } else {\n          setCookie('token', data.jwt, {\n            path: '/',\n            sameSite: true,\n            maxAge: 86400\n          })\n          setCookie('user', userData, {\n            path: '/',\n            sameSite: true,\n            maxAge: 86400\n          })\n        }\n        router.push('/dashboard/pedidos')\n      })\n      .catch((err) => {\n        console.log(err)\n        alert('confira seus dados e tente novamente')\n      })\n  }\n\n  const changeRemenber = () => {\n    setRemenber(!remenber)\n  }\n  return (\n    <Container>\n      <div className=\"sub-wrapper\">\n        <div className=\"subscribe-wrapper\">\n          <div\n            className=\"logo\"\n            // onClick={() => {\n            //   router.push('/')\n            // }}\n          >\n            {/* <Image src=\"/img/logo3.png\" height={40} width={140} /> */}\n          </div>\n          <div className=\"people\">\n            <img src=\"/img/login/player.svg\" />\n          </div>\n          <div className=\"subscribe\">\n            <Heading\n              margin=\"50px 0 0 0\"\n              color=\"black\"\n              font=\"ubuntu\"\n              fontWeight=\"normal\"\n              fontSize=\"xxxmax\"\n              textAlign=\"right\"\n              lineBottom={false}\n              role=\"h2\"\n            >\n              Novo aqui?\n            </Heading>\n\n            <Link\n              href=\"/cadastro\"\n              fontWeight=\"semiBold\"\n              color=\"brown\"\n              font=\"ubuntu\"\n              fontSize=\"xxmax\"\n              textAlign=\"right\"\n              justify=\"flex-end\"\n            >\n              Faça seu cadastro\n            </Link>\n          </div>\n        </div>\n\n        <div className=\"form-wrapper\">\n          <img src=\"/img/logo3.png\" alt=\"JG\" className=\"logo\" />\n          <Heading\n            color=\"white100\"\n            font=\"ubuntu\"\n            justify=\"center\"\n            fontWeight=\"bold\"\n            lineBottom={false}\n            fontSize=\"extra\"\n            margin=\"50px 0\"\n          >\n            BEM - VINDO!\n          </Heading>\n\n          <form onSubmit={send}>\n            <div className=\"login\">\n              <Label\n                color=\"white100\"\n                font=\"ubuntu\"\n                fontWeight=\"semiBold\"\n                fontSize=\"large\"\n              >\n                &nbsp; LOGIN\n                <Input\n                  margin=\"10px 0\"\n                  radius={50}\n                  height={50}\n                  borderColor=\"white100\"\n                  value={login}\n                  onChange={(e) => setLogin(e.target.value.toLowerCase())}\n                />\n              </Label>\n            </div>\n\n            <div className=\"password\">\n              <Label\n                color=\"white100\"\n                font=\"ubuntu\"\n                fontWeight=\"semiBold\"\n                fontSize=\"large\"\n              >\n                &nbsp; SENHA\n                <Input\n                  margin=\"10px 0\"\n                  radius={50}\n                  height={50}\n                  borderColor=\"white100\"\n                  value={password}\n                  type=\"password\"\n                  onChange={(e) => setPassword(e.target.value)}\n                />\n              </Label>\n            </div>\n\n            <div className=\"remenber\">\n              <input\n                type=\"checkbox\"\n                name=\"remenber\"\n                id=\"remenber-check-box\"\n                onChange={changeRemenber}\n              />\n              &nbsp; &nbsp; lembrar\n            </div>\n\n            <div className=\"forgeted\">\n              <Link\n                href=\"/recuperar-senha\"\n                color=\"white100\"\n                font=\"ubuntu\"\n                fontSize=\"small\"\n              >\n                Esqueci minha senha\n              </Link>\n            </div>\n\n            <div className=\"send\">\n              <Button\n                radius={50}\n                fontSize=\"xlarge\"\n                fontWeight=\"semiBold\"\n                fill=\"yellow300\"\n                color=\"black\"\n              >\n                ENVIAR\n              </Button>\n            </div>\n          </form>\n        </div>\n\n        <div className=\"subscribe-mobile\">\n          Novo aqui?\n          <Link\n            href=\"/cadastro\"\n            color=\"brown\"\n            fontSize=\"xlarge\"\n            fontWeight=\"semiBold\"\n          >\n            &nbsp; Se inscreva!\n          </Link>\n        </div>\n      </div>\n    </Container>\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}