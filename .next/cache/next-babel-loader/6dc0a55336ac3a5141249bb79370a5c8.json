{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Button from 'components/Button';\nimport Heading from 'components/Heading';\nimport Input from 'components/Input';\nimport Label from 'components/Label';\nimport Link from 'components/Link';\nimport Container from 'styles/pages/Login';\nimport { useState } from 'react';\nimport api from 'services/api';\nimport { useStateContext } from 'context';\nimport { useRouter } from 'next/router';\nimport { useCookies } from 'react-cookie';\n\nconst Login = () => {\n  const {\n    0: login,\n    1: setLogin\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const {\n    0: remenber,\n    1: setRemenber\n  } = useState(false);\n  const {\n    token,\n    setToken,\n    setUser\n  } = useStateContext();\n  const [cookie, setCookie] = useCookies(['user']);\n  const router = useRouter();\n\n  const send = async e => {\n    e.preventDefault();\n    await api.post('/auth/local', {\n      identifier: login,\n      password\n    }).then(response => {\n      var _user$foto;\n\n      console.log(response.data);\n      const {\n        data\n      } = response;\n      const {\n        user\n      } = data;\n      console.log(user);\n      const userData = {\n        username: user.username,\n        email: user.email,\n        phone: user.phone,\n        endereco: user.endereco,\n        foto: (_user$foto = user.foto) === null || _user$foto === void 0 ? void 0 : _user$foto.url,\n        favorites: user.favoritos.produtos.map(produto => produto.id)\n      };\n      setToken(data.jwt);\n      setUser(userData);\n\n      if (remenber) {\n        setCookie('token', data.jwt, {\n          path: '/',\n          maxAge: 604800,\n          // Expires after 1hr\n          sameSite: true\n        });\n        setCookie('user', userData, {\n          path: '/',\n          maxAge: 604800,\n          // Expires after 1hr\n          sameSite: true\n        });\n      } else {\n        setCookie('token', data.jwt, {\n          path: '/',\n          sameSite: true,\n          maxAge: 86400\n        });\n        setCookie('user', userData, {\n          path: '/',\n          sameSite: true,\n          maxAge: 86400\n        });\n      }\n\n      router.push('/dashboard/pedidos');\n    }).catch(err => {\n      console.log(err);\n      alert('confira seus dados e tente novamente');\n    });\n  };\n\n  const changeRemenber = () => {\n    setRemenber(!remenber);\n  };\n\n  return /*#__PURE__*/_jsx(Container, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"sub-wrapper\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"subscribe-wrapper\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"logo\" // onClick={() => {\n          //   router.push('/')\n          // }}\n\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"people\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"/img/login/player.svg\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"subscribe\",\n          children: [/*#__PURE__*/_jsx(Heading, {\n            margin: \"50px 0 0 0\",\n            color: \"black\",\n            font: \"ubuntu\",\n            fontWeight: \"normal\",\n            fontSize: \"xxxmax\",\n            textAlign: \"right\",\n            lineBottom: false,\n            role: \"h2\",\n            children: \"Novo aqui?\"\n          }), /*#__PURE__*/_jsx(Link, {\n            href: \"/cadastro\",\n            fontWeight: \"semiBold\",\n            color: \"brown\",\n            font: \"ubuntu\",\n            fontSize: \"xxmax\",\n            textAlign: \"right\",\n            justify: \"flex-end\",\n            children: \"Fa\\xE7a seu cadastro\"\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-wrapper\",\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          src: \"/img/logo3.png\",\n          alt: \"JG\",\n          className: \"logo\"\n        }), /*#__PURE__*/_jsx(Heading, {\n          color: \"white100\",\n          font: \"ubuntu\",\n          justify: \"center\",\n          fontWeight: \"bold\",\n          lineBottom: false,\n          fontSize: \"extra\",\n          margin: \"50px 0\",\n          children: \"BEM - VINDO!\"\n        }), /*#__PURE__*/_jsxs(\"form\", {\n          onSubmit: send,\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"login\",\n            children: /*#__PURE__*/_jsxs(Label, {\n              color: \"white100\",\n              font: \"ubuntu\",\n              fontWeight: \"semiBold\",\n              fontSize: \"large\",\n              children: [\"\\xA0 LOGIN\", /*#__PURE__*/_jsx(Input, {\n                margin: \"10px 0\",\n                radius: 50,\n                height: 50,\n                borderColor: \"white100\",\n                value: login,\n                onChange: e => setLogin(e.target.value.toLowerCase())\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"password\",\n            children: /*#__PURE__*/_jsxs(Label, {\n              color: \"white100\",\n              font: \"ubuntu\",\n              fontWeight: \"semiBold\",\n              fontSize: \"large\",\n              children: [\"\\xA0 SENHA\", /*#__PURE__*/_jsx(Input, {\n                margin: \"10px 0\",\n                radius: 50,\n                height: 50,\n                borderColor: \"white100\",\n                value: password,\n                type: \"password\",\n                onChange: e => setPassword(e.target.value)\n              })]\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"remenber\",\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              type: \"checkbox\",\n              name: \"remenber\",\n              id: \"remenber-check-box\",\n              onChange: changeRemenber\n            }), \"\\xA0 \\xA0 lembrar\"]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"forgeted\",\n            children: /*#__PURE__*/_jsx(Link, {\n              href: \"/recuperar-senha\",\n              color: \"white100\",\n              font: \"ubuntu\",\n              fontSize: \"small\",\n              children: \"Esqueci minha senha\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"send\",\n            children: /*#__PURE__*/_jsx(Button, {\n              radius: 50,\n              fontSize: \"xlarge\",\n              fontWeight: \"semiBold\",\n              fill: \"yellow300\",\n              color: \"black\",\n              children: \"ENVIAR\"\n            })\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"subscribe-mobile\",\n        children: [\"Novo aqui?\", /*#__PURE__*/_jsx(Link, {\n          href: \"/cadastro\",\n          color: \"brown\",\n          fontSize: \"xlarge\",\n          fontWeight: \"semiBold\",\n          children: \"\\xA0 Se inscreva!\"\n        })]\n      })]\n    })\n  });\n};\n\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}