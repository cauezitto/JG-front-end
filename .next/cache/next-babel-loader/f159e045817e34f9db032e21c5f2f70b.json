{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\cauezitto\\\\Documents\\\\projetos\\\\JG\\\\front-end\\\\src\\\\pages\\\\carrinho.tsx\";\nimport PaddingWrapper from 'components/PaddingWrapper';\nimport { HorizontalPaddingWrapper } from 'styles/pages/home';\nimport DefaultTemplate from 'templates/Default';\nimport Heading from 'components/Heading';\nimport ShadowBox from 'components/ShadowBox';\nimport * as Styles from 'styles/pages/carrinho'; // import products from 'mocks/products.json'\n\nimport { useStateContext } from 'context';\nimport QuantController from 'components/QuantController';\nimport priceHandler from 'utils/handlePrice';\nimport { FiHeart } from 'react-icons/fi';\nimport { CgCloseR } from 'react-icons/cg';\nimport GridWrapper from 'components/GridWrapper';\nimport ProductCard from 'components/ProductCard';\nimport Button from 'components/Button';\nimport Input from 'components/Input';\nimport { cepMask } from 'utils/masks';\nimport Link from 'components/Link';\nimport { useState, useEffect } from 'react';\nimport api from 'services/api';\nimport { initializeApollo } from 'utils/apollo';\nimport { getTierProducts } from 'graphql/queryes/produtos';\nimport Paragraph from 'components/Paragraph';\nimport { useCookies } from 'react-cookie';\nimport { useRouter } from 'next/router';\nimport { getCategorias } from 'graphql/queryes/categorias';\n\nconst Carrinho = ({\n  tier,\n  categorias = []\n}) => {\n  const {\n    server,\n    cart,\n    setCart\n  } = useStateContext();\n  const {\n    products,\n    total\n  } = cart;\n  const {\n    0: cep,\n    1: setCep\n  } = useState('');\n  const {\n    0: shippingPrice,\n    1: setShippingPrice\n  } = useState(0);\n  const {\n    0: cashBack,\n    1: setCashBack\n  } = useState(0);\n  const {\n    0: cashBackPercent,\n    1: setCashBackPercent\n  } = useState(0);\n  const {\n    0: cupom,\n    1: setCupom\n  } = useState('');\n  const [cookie, setCookie] = useCookies(['user']);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const router = useRouter();\n\n  const cupomCheck = async () => {\n    alert(cupom);\n    await api.get(`/cupom/${cupom}`).then(response => {\n      const {\n        desconto\n      } = response.data;\n      setCashBackPercent(desconto);\n    }).catch(err => {\n      console.log(err);\n      alert('Cumpom invÃ¡lido');\n    });\n  };\n\n  const handleAddQuant = position => {\n    const products = cart.products;\n    let total = 0; // console.log(products[position].quant)\n\n    products[position].quant = products[position].quant + 1;\n    products.map(product => {\n      total = total + product.preco * product.quant;\n    });\n    setCart({\n      products,\n      total: total\n    });\n  };\n\n  const handleSubQuant = position => {\n    const products = cart.products;\n    let total = 0;\n\n    if (products[position].quant === 1) {\n      return;\n    }\n\n    products[position].quant = products[position].quant - 1;\n    products.map(product => {\n      total = total + product.preco * product.quant;\n    });\n    setCart({\n      products,\n      total: total\n    });\n  };\n\n  const shippingCalculate = async () => {\n    if (cep.length < 8) {\n      alert('cep incompleto');\n      return;\n    }\n\n    await api.post('/shipping/calculate', {\n      cep,\n      products: products.map(product => ({\n        id: product.id,\n        quant: product.quant\n      }))\n    }).then(response => {\n      const {\n        data\n      } = response;\n      const sedexShipping = data.find(option => option.name === 'SEDEX');\n      setShippingPrice(Number(sedexShipping.price) / 2);\n    }).catch(err => {\n      alert('algo deu errado, por favor tente novamente');\n      console.log(err);\n    });\n  };\n\n  const handleDelete = position => {\n    let total = 0.0;\n    const products = cart.products.filter(product => product !== cart.products[position]);\n    products.map(product => {\n      total = total + product.preco * product.quant;\n    });\n    setCart({\n      products,\n      total: total\n    });\n  };\n\n  const cashBackCalculate = () => {\n    const discount = total / 100 * cashBackPercent;\n    setCashBack(discount);\n  };\n\n  useEffect(() => {\n    cashBackCalculate();\n  }, [cashBackPercent, total]); // useEffect(() => {\n  //   setCart({\n  //     products: [],\n  //     total: 0\n  //   })\n  // }, [])\n\n  if (!products[0]) {\n    return /*#__PURE__*/_jsxDEV(DefaultTemplate, {\n      categorias: categorias,\n      children: /*#__PURE__*/_jsxDEV(PaddingWrapper, {\n        children: /*#__PURE__*/_jsxDEV(HorizontalPaddingWrapper, {\n          children: [/*#__PURE__*/_jsxDEV(Heading, {\n            children: \"Seu carrinho est\\xE1 vazio!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(HorizontalPaddingWrapper, {\n            children: /*#__PURE__*/_jsxDEV(Paragraph, {\n              textAlign: \"center\",\n              children: \"Parece que voc\\xEA n\\xE3o tem nada em seu carrinho, aqui est\\xE3o algumas sujest\\xF5es\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(HorizontalPaddingWrapper, {\n            children: /*#__PURE__*/_jsxDEV(GridWrapper, {\n              children: tier.map((product, index) => /*#__PURE__*/_jsxDEV(ProductCard, {\n                id: product.id,\n                name: product.nome,\n                image: server + product.cover.url,\n                price: product.preco,\n                slug: product.slug\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this);\n  }\n\n  const buy = async () => {\n    if (!cookie.token) {\n      router.push('/login');\n      return;\n    }\n\n    if (shippingPrice === 0) {\n      alert('por favor, insira seu cep e calcule seu frete');\n      return;\n    }\n\n    if (isLoading) {\n      return;\n    }\n\n    setIsLoading(true);\n    const order = await api.post('/pedido', {\n      cep,\n      cupom,\n      products: cart.products\n    }, {\n      headers: {\n        Authorization: `Bearer ${cookie.token}`\n      }\n    }).then(order => {\n      setCart({\n        products: [],\n        total: 0\n      });\n      setIsLoading(false);\n      router.push(order.data.url);\n    }).catch(err => {\n      alert('algo deu errado, por favor tente novamente');\n      setIsLoading(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(DefaultTemplate, {\n    categorias: categorias,\n    children: /*#__PURE__*/_jsxDEV(PaddingWrapper, {\n      children: /*#__PURE__*/_jsxDEV(HorizontalPaddingWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(Heading, {\n          margin: \"0 0 30px 0\",\n          children: \"MEU CARRINHO\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Styles.Main, {\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Styles.ShippingWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"title\",\n                children: \"PRODUTO\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"title\",\n                children: \"QUANTIDADE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"title\",\n                children: \"PRE\\xC7O UNITARIO\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this), products.map((product, index) => /*#__PURE__*/_jsxDEV(ShadowBox, {\n              className: \"shipping-box\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cell\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex variable\",\n                  children: [/*#__PURE__*/_jsxDEV(Styles.ProductImage, {\n                    image: server + product.cover.url\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Styles.ProductData, {\n                    children: [/*#__PURE__*/_jsxDEV(Styles.ProductName, {\n                      children: product.nome.toUpperCase()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Styles.ProductReference, {\n                      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"refer\\xEAncia:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 261,\n                        columnNumber: 27\n                      }, this), \" \", product.slug]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 260,\n                      columnNumber: 25\n                    }, this), product.custom.isCustom && /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(Styles.CustomName, {\n                        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                          children: \"Nome:\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 267,\n                          columnNumber: 31\n                        }, this), \" \", product.custom.name]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 266,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(Styles.CustomNumber, {\n                        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                          children: \"N\\xFAmero:\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 271,\n                          columnNumber: 31\n                        }, this), \" \", product.custom.number]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 270,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true), /*#__PURE__*/_jsxDEV(Styles.CustomNumber, {\n                      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"Tamanho:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 277,\n                        columnNumber: 27\n                      }, this), \" \", product.size]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 276,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Styles.Favorite, {\n                      children: /*#__PURE__*/_jsxDEV(FiHeart, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 281,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 280,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cell\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex align-center\",\n                  children: /*#__PURE__*/_jsxDEV(QuantController, {\n                    handleAdd: () => {\n                      handleAddQuant(index);\n                    },\n                    handleSub: () => {\n                      handleSubQuant(index);\n                    },\n                    quant: product.quant\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 288,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cell\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex align-center\",\n                  children: [/*#__PURE__*/_jsxDEV(Styles.ProductPrice, {\n                    children: priceHandler.priceNumberToReadblePrice(product.preco)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 301,\n                    columnNumber: 23\n                  }, this), \"\\xA0 \\xA0\", /*#__PURE__*/_jsxDEV(CgCloseR, {\n                    onClick: () => {\n                      handleDelete(index);\n                    },\n                    color: \"red\",\n                    size: 20\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Styles.OrderResume, {\n            children: [/*#__PURE__*/_jsxDEV(Heading, {\n              role: \"h4\",\n              lineBottom: false,\n              color: \"white100\",\n              children: \"RESUMO DO PEDIDO\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"subtitle\",\n                children: \"SUBTOTAL\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"main-price\",\n                children: priceHandler.priceNumberToReadblePrice(total)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"subtitle\",\n                children: \"ENTREGA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"shipping-price\",\n                children: shippingPrice === 0 ? 'Insira seu cep e calcule o envio' : priceHandler.priceNumberToReadblePrice(shippingPrice)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"subtitle\",\n                children: \"DESCONTO\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"shipping-price\",\n                children: cashBack === 0 ? 'Insira seu cupom de desconto' : priceHandler.priceNumberToReadblePrice(cashBack)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"subtitle\",\n                children: \"TOTAL\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"total\",\n                children: priceHandler.priceNumberToReadblePrice(total - cashBack + shippingPrice)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shipping-and-cupom\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shipping\",\n              children: /*#__PURE__*/_jsxDEV(ShadowBox, {\n                paddingX: \"xsmall\",\n                paddingY: \"medium\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-between-variable\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"xxlarge semiBold\",\n                      children: \"CALCULE FRETE E PRAZO\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 371,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 374,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Link, {\n                      href: \"http://www.buscacep.correios.com.br/sistemas/buscacep/buscaCepEndereco.cfm\",\n                      target: \"_blank\",\n                      fontSize: \"xlarge\",\n                      children: \"N\\xE3o sei meu cep\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 375,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 370,\n                    columnNumber: 21\n                  }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"start cep-input-wrapper\",\n                    children: [/*#__PURE__*/_jsxDEV(Input, {\n                      value: cep,\n                      onChange: e => setCep(cepMask(e.target.value)),\n                      height: 50,\n                      width: 200,\n                      maxLength: 8,\n                      placeholder: \"MEU CEP\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 385,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      fontSize: \"xlarge\",\n                      onClick: shippingCalculate,\n                      children: \"OK\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 394,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 384,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 15\n            }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(ShadowBox, {\n              className: \"cupom-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(Heading, {\n                role: \"h4\",\n                fontSize: \"large\",\n                lineBottom: false,\n                children: \"CUPOM DE DESCONTO\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cupom-input-wrapper\",\n                children: [/*#__PURE__*/_jsxDEV(Input, {\n                  value: cupom,\n                  onChange: e => setCupom(e.target.value),\n                  placeholder: \"MEU CUPOM\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 19\n                }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: cupomCheck,\n                  children: \"OK\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"buy-button\",\n              fill: \"red100\",\n              radius: 10,\n              onClick: buy,\n              children: isLoading ? 'Processando...' : 'Finalizar compra'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Heading, {\n            role: \"h2\",\n            lineBottom: false,\n            fontSize: \"xxxlarge\",\n            margin: \"50px 0\",\n            fontWeight: \"bold\",\n            children: \"COMPRE TAMB\\xC9M\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(GridWrapper, {\n            children: tier.map((product, index) => /*#__PURE__*/_jsxDEV(ProductCard, {\n              id: product.id,\n              name: product.nome,\n              image: server + product.cover.url,\n              price: product.preco,\n              slug: product.slug\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 5\n  }, this);\n};\n\nexport const getStaticProps = async () => {\n  const client = initializeApollo();\n  const {\n    data\n  } = await client.query({\n    query: getTierProducts\n  });\n  const tierList = data.destaque.produtos.map(produto => produto.produto);\n  const response = await client.query({\n    query: getCategorias\n  });\n  const {\n    categorias\n  } = response.data;\n  return {\n    props: {\n      tier: data.destaque.produtos.map(produto => produto.produto),\n      categorias\n    },\n    revalidate: 60\n  };\n};\nexport default Carrinho;","map":{"version":3,"sources":["C:/Users/cauezitto/Documents/projetos/JG/front-end/src/pages/carrinho.tsx"],"names":["PaddingWrapper","HorizontalPaddingWrapper","DefaultTemplate","Heading","ShadowBox","Styles","useStateContext","QuantController","priceHandler","FiHeart","CgCloseR","GridWrapper","ProductCard","Button","Input","cepMask","Link","useState","useEffect","api","initializeApollo","getTierProducts","Paragraph","useCookies","useRouter","getCategorias","Carrinho","tier","categorias","server","cart","setCart","products","total","cep","setCep","shippingPrice","setShippingPrice","cashBack","setCashBack","cashBackPercent","setCashBackPercent","cupom","setCupom","cookie","setCookie","isLoading","setIsLoading","router","cupomCheck","alert","get","then","response","desconto","data","catch","err","console","log","handleAddQuant","position","quant","map","product","preco","handleSubQuant","shippingCalculate","length","post","id","sedexShipping","find","option","name","Number","price","handleDelete","filter","cashBackCalculate","discount","index","nome","cover","url","slug","buy","token","push","order","headers","Authorization","toUpperCase","custom","isCustom","number","size","priceNumberToReadblePrice","e","target","value","getStaticProps","client","query","tierList","destaque","produtos","produto","props","revalidate"],"mappings":"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","sourcesContent":["import PaddingWrapper from 'components/PaddingWrapper'\nimport { HorizontalPaddingWrapper } from 'styles/pages/home'\nimport DefaultTemplate from 'templates/Default'\nimport Heading from 'components/Heading'\nimport ShadowBox from 'components/ShadowBox'\nimport * as Styles from 'styles/pages/carrinho'\n// import products from 'mocks/products.json'\nimport { useStateContext } from 'context'\nimport QuantController from 'components/QuantController'\nimport priceHandler from 'utils/handlePrice'\nimport { FiHeart } from 'react-icons/fi'\nimport { CgCloseR } from 'react-icons/cg'\nimport GridWrapper from 'components/GridWrapper'\nimport ProductCard from 'components/ProductCard'\nimport Button from 'components/Button'\nimport Input from 'components/Input'\nimport { cepMask } from 'utils/masks'\nimport Link from 'components/Link'\nimport { useState, useEffect } from 'react'\nimport api from 'services/api'\nimport { initializeApollo } from 'utils/apollo'\nimport { getTierProducts } from 'graphql/queryes/produtos'\nimport { GetStaticProps } from 'next'\nimport { ProductProps } from 'types/ProductProps'\nimport Paragraph from 'components/Paragraph'\nimport { useCookies } from 'react-cookie'\nimport { useRouter } from 'next/router'\nimport { getCategorias } from 'graphql/queryes/categorias'\n\ntype Props = {\n  tier: ProductProps[]\n  categorias: Array<{\n    nome: string\n  }>\n}\n\nconst Carrinho = ({ tier, categorias = [] }: Props) => {\n  const { server, cart, setCart } = useStateContext()\n  const { products, total } = cart\n  const [cep, setCep] = useState('')\n  const [shippingPrice, setShippingPrice] = useState(0)\n  const [cashBack, setCashBack] = useState(0)\n  const [cashBackPercent, setCashBackPercent] = useState(0)\n  const [cupom, setCupom] = useState('')\n  const [cookie, setCookie] = useCookies(['user'])\n  const [isLoading, setIsLoading] = useState(false)\n  const router = useRouter()\n\n  const cupomCheck = async () => {\n    alert(cupom)\n    await api\n      .get(`/cupom/${cupom}`)\n      .then((response) => {\n        const { desconto } = response.data\n        setCashBackPercent(desconto)\n      })\n      .catch((err) => {\n        console.log(err)\n        alert('Cumpom invÃ¡lido')\n      })\n  }\n\n  const handleAddQuant = (position: number) => {\n    const products = cart.products\n    let total = 0\n\n    // console.log(products[position].quant)\n    products[position].quant = products[position].quant + 1\n\n    products.map((product) => {\n      total = total + product.preco * product.quant\n    })\n\n    setCart({\n      products,\n      total: total\n    })\n  }\n  const handleSubQuant = (position: number) => {\n    const products = cart.products\n\n    let total = 0\n\n    if (products[position].quant === 1) {\n      return\n    }\n\n    products[position].quant = products[position].quant - 1\n\n    products.map((product) => {\n      total = total + product.preco * product.quant\n    })\n\n    setCart({\n      products,\n      total: total\n    })\n  }\n  const shippingCalculate = async () => {\n    if (cep.length < 8) {\n      alert('cep incompleto')\n      return\n    }\n    await api\n      .post('/shipping/calculate', {\n        cep,\n        products: products.map((product) => ({\n          id: product.id,\n          quant: product.quant\n        }))\n      })\n      .then((response) => {\n        const { data } = response\n\n        const sedexShipping = data.find(\n          (option: any) => option.name === 'SEDEX'\n        )\n        setShippingPrice(Number(sedexShipping.price) / 2)\n      })\n      .catch((err) => {\n        alert('algo deu errado, por favor tente novamente')\n        console.log(err)\n      })\n  }\n\n  const handleDelete = (position: number) => {\n    let total = 0.0\n\n    const products = cart.products.filter(\n      (product) => product !== cart.products[position]\n    )\n\n    products.map((product) => {\n      total = total + product.preco * product.quant\n    })\n\n    setCart({\n      products,\n      total: total\n    })\n  }\n\n  const cashBackCalculate = () => {\n    const discount = (total / 100) * cashBackPercent\n\n    setCashBack(discount)\n  }\n\n  useEffect(() => {\n    cashBackCalculate()\n  }, [cashBackPercent, total])\n\n  // useEffect(() => {\n  //   setCart({\n  //     products: [],\n  //     total: 0\n  //   })\n  // }, [])\n  if (!products[0]) {\n    return (\n      <DefaultTemplate categorias={categorias}>\n        <PaddingWrapper>\n          <HorizontalPaddingWrapper>\n            <Heading>Seu carrinho estÃ¡ vazio!</Heading>\n\n            <HorizontalPaddingWrapper>\n              <Paragraph textAlign=\"center\">\n                Parece que vocÃª nÃ£o tem nada em seu carrinho, aqui estÃ£o algumas\n                sujestÃµes\n              </Paragraph>\n            </HorizontalPaddingWrapper>\n\n            <HorizontalPaddingWrapper>\n              <GridWrapper>\n                {tier.map((product, index) => (\n                  <ProductCard\n                    id={product.id}\n                    key={index}\n                    name={product.nome}\n                    image={server + product.cover.url}\n                    price={product.preco}\n                    slug={product.slug}\n                  />\n                ))}\n              </GridWrapper>\n            </HorizontalPaddingWrapper>\n          </HorizontalPaddingWrapper>\n        </PaddingWrapper>\n      </DefaultTemplate>\n    )\n  }\n\n  const buy = async () => {\n    if (!cookie.token) {\n      router.push('/login')\n      return\n    }\n\n    if (shippingPrice === 0) {\n      alert('por favor, insira seu cep e calcule seu frete')\n      return\n    }\n\n    if (isLoading) {\n      return\n    }\n\n    setIsLoading(true)\n\n    const order = await api\n      .post(\n        '/pedido',\n        { cep, cupom, products: cart.products },\n        {\n          headers: {\n            Authorization: `Bearer ${cookie.token}`\n          }\n        }\n      )\n      .then((order) => {\n        setCart({\n          products: [],\n          total: 0\n        })\n        setIsLoading(false)\n        router.push(order.data.url)\n      })\n      .catch((err) => {\n        alert('algo deu errado, por favor tente novamente')\n        setIsLoading(false)\n      })\n  }\n\n  return (\n    <DefaultTemplate categorias={categorias}>\n      <PaddingWrapper>\n        <HorizontalPaddingWrapper>\n          <Heading margin=\"0 0 30px 0\">MEU CARRINHO</Heading>\n\n          <br />\n          <Styles.Main>\n            <br />\n            <Styles.ShippingWrapper>\n              <div className=\"header\">\n                <h3 className=\"title\">PRODUTO</h3>\n                <h3 className=\"title\">QUANTIDADE</h3>\n                <h3 className=\"title\">PREÃO UNITARIO</h3>\n              </div>\n              <br />\n              {products.map((product, index) => (\n                <ShadowBox key={index} className=\"shipping-box\">\n                  <div className=\"cell\">\n                    <div className=\"flex variable\">\n                      <Styles.ProductImage image={server + product.cover.url} />\n                      <Styles.ProductData>\n                        <Styles.ProductName>\n                          {product.nome.toUpperCase()}\n                        </Styles.ProductName>\n\n                        <Styles.ProductReference>\n                          <b>referÃªncia:</b> {product.slug}\n                        </Styles.ProductReference>\n\n                        {product.custom.isCustom && (\n                          <>\n                            <Styles.CustomName>\n                              <b>Nome:</b> {product.custom.name}\n                            </Styles.CustomName>\n\n                            <Styles.CustomNumber>\n                              <b>NÃºmero:</b> {product.custom.number}\n                            </Styles.CustomNumber>\n                          </>\n                        )}\n\n                        <Styles.CustomNumber>\n                          <b>Tamanho:</b> {product.size}\n                        </Styles.CustomNumber>\n\n                        <Styles.Favorite>\n                          <FiHeart />\n                        </Styles.Favorite>\n                      </Styles.ProductData>\n                    </div>\n                  </div>\n                  <div className=\"cell\">\n                    <div className=\"flex align-center\">\n                      <QuantController\n                        handleAdd={() => {\n                          handleAddQuant(index)\n                        }}\n                        handleSub={() => {\n                          handleSubQuant(index)\n                        }}\n                        quant={product.quant}\n                      />\n                    </div>\n                  </div>\n                  <div className=\"cell\">\n                    <div className=\"flex align-center\">\n                      <Styles.ProductPrice>\n                        {priceHandler.priceNumberToReadblePrice(product.preco)}\n                      </Styles.ProductPrice>\n                      &nbsp; &nbsp;\n                      <CgCloseR\n                        onClick={() => {\n                          handleDelete(index)\n                        }}\n                        color=\"red\"\n                        size={20}\n                      />\n                    </div>\n                  </div>\n                </ShadowBox>\n              ))}\n            </Styles.ShippingWrapper>\n            <br />\n            <Styles.OrderResume>\n              <Heading role=\"h4\" lineBottom={false} color=\"white100\">\n                RESUMO DO PEDIDO\n              </Heading>\n\n              <br />\n\n              <div className=\"row\">\n                <span className=\"subtitle\">SUBTOTAL</span>\n\n                <span className=\"main-price\">\n                  {priceHandler.priceNumberToReadblePrice(total)}\n                </span>\n              </div>\n\n              <div className=\"row\">\n                <span className=\"subtitle\">ENTREGA</span>\n\n                <span className=\"shipping-price\">\n                  {shippingPrice === 0\n                    ? 'Insira seu cep e calcule o envio'\n                    : priceHandler.priceNumberToReadblePrice(shippingPrice)}\n                </span>\n              </div>\n\n              <div className=\"row\">\n                <span className=\"subtitle\">DESCONTO</span>\n\n                <span className=\"shipping-price\">\n                  {cashBack === 0\n                    ? 'Insira seu cupom de desconto'\n                    : priceHandler.priceNumberToReadblePrice(cashBack)}\n                </span>\n              </div>\n\n              <div className=\"row\">\n                <span className=\"subtitle\">TOTAL</span>\n\n                <span className=\"total\">\n                  {priceHandler.priceNumberToReadblePrice(\n                    total - cashBack + shippingPrice\n                  )}\n                </span>\n              </div>\n            </Styles.OrderResume>\n\n            <br />\n\n            <div className=\"shipping-and-cupom\">\n              <div className=\"shipping\">\n                <ShadowBox paddingX=\"xsmall\" paddingY=\"medium\">\n                  <div className=\"space-between-variable\">\n                    <div>\n                      <h3 className=\"xxlarge semiBold\">\n                        CALCULE FRETE E PRAZO\n                      </h3>\n                      <br />\n                      <Link\n                        href=\"http://www.buscacep.correios.com.br/sistemas/buscacep/buscaCepEndereco.cfm\"\n                        target=\"_blank\"\n                        fontSize=\"xlarge\"\n                      >\n                        NÃ£o sei meu cep\n                      </Link>\n                    </div>\n                    &nbsp;\n                    <div className=\"start cep-input-wrapper\">\n                      <Input\n                        value={cep}\n                        onChange={(e) => setCep(cepMask(e.target.value))}\n                        height={50}\n                        width={200}\n                        maxLength={8}\n                        placeholder=\"MEU CEP\"\n                      />\n\n                      <Button fontSize=\"xlarge\" onClick={shippingCalculate}>\n                        OK\n                      </Button>\n                    </div>\n                  </div>\n                </ShadowBox>\n              </div>\n              &nbsp;\n              <ShadowBox className=\"cupom-wrapper\">\n                <Heading role=\"h4\" fontSize=\"large\" lineBottom={false}>\n                  CUPOM DE DESCONTO\n                </Heading>\n\n                <div className=\"cupom-input-wrapper\">\n                  <Input\n                    value={cupom}\n                    onChange={(e) => setCupom(e.target.value)}\n                    placeholder=\"MEU CUPOM\"\n                  />{' '}\n                  <Button onClick={cupomCheck}>OK</Button>\n                </div>\n              </ShadowBox>\n              <Button\n                className=\"buy-button\"\n                fill=\"red100\"\n                radius={10}\n                onClick={buy}\n              >\n                {isLoading ? 'Processando...' : 'Finalizar compra'}\n              </Button>\n            </div>\n\n            <Heading\n              role=\"h2\"\n              lineBottom={false}\n              fontSize=\"xxxlarge\"\n              margin=\"50px 0\"\n              fontWeight=\"bold\"\n            >\n              COMPRE TAMBÃM\n            </Heading>\n\n            <GridWrapper>\n              {tier.map((product, index) => (\n                <ProductCard\n                  id={product.id}\n                  key={index}\n                  name={product.nome}\n                  image={server + product.cover.url}\n                  price={product.preco}\n                  slug={product.slug}\n                />\n              ))}\n            </GridWrapper>\n          </Styles.Main>\n        </HorizontalPaddingWrapper>\n      </PaddingWrapper>\n    </DefaultTemplate>\n  )\n}\n\nexport const getStaticProps: GetStaticProps = async () => {\n  const client = initializeApollo()\n\n  const { data } = await client.query({\n    query: getTierProducts\n  })\n  const tierList = data.destaque.produtos.map((produto: any) => produto.produto)\n\n  const response = await client.query({\n    query: getCategorias\n  })\n\n  const { categorias } = response.data\n\n  return {\n    props: {\n      tier: data.destaque.produtos.map((produto: any) => produto.produto),\n      categorias\n    },\n    revalidate: 60\n  }\n}\n\nexport default Carrinho\n"]},"metadata":{},"sourceType":"module"}