{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\cauezitto\\\\Documents\\\\projetos\\\\JG\\\\front-end\\\\src\\\\pages\\\\login.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport Button from 'components/Button';\nimport Heading from 'components/Heading';\nimport Input from 'components/Input';\nimport Label from 'components/Label';\nimport Link from 'components/Link';\nimport Container from 'styles/pages/Login';\nimport { useState } from 'react';\nimport api from 'services/api';\nimport { useStateContext } from 'context';\nimport { useRouter } from 'next/router';\nimport { useCookies } from 'react-cookie';\n\nvar Login = function Login() {\n  _s();\n\n  var _useState = useState(''),\n      login = _useState[0],\n      setLogin = _useState[1];\n\n  var _useState2 = useState(''),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useState3 = useState(false),\n      remenber = _useState3[0],\n      setRemenber = _useState3[1];\n\n  var _useStateContext = useStateContext(),\n      token = _useStateContext.token,\n      setToken = _useStateContext.setToken,\n      setUser = _useStateContext.setUser;\n\n  var _useCookies = useCookies(['user']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookie = _useCookies2[0],\n      setCookie = _useCookies2[1];\n\n  var router = useRouter();\n\n  var send = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return api.post('/auth/local', {\n                identifier: login,\n                password: password\n              }).then(function (response) {\n                var _user$foto;\n\n                console.log(response.data);\n                var data = response.data;\n                var user = data.user;\n                console.log(user);\n                var userData = {\n                  username: user.username,\n                  email: user.email,\n                  phone: user.phone,\n                  endereco: user.endereco,\n                  foto: (_user$foto = user.foto) === null || _user$foto === void 0 ? void 0 : _user$foto.url,\n                  favorites: user.favoritos.produtos.map(function (produto) {\n                    return produto.id;\n                  })\n                };\n                setToken(data.jwt);\n                setUser(userData);\n\n                if (remenber) {\n                  setCookie('token', data.jwt, {\n                    path: '/',\n                    maxAge: 604800,\n                    // Expires after 1hr\n                    sameSite: true\n                  });\n                  setCookie('user', userData, {\n                    path: '/',\n                    maxAge: 604800,\n                    // Expires after 1hr\n                    sameSite: true\n                  });\n                } else {\n                  setCookie('token', data.jwt, {\n                    path: '/',\n                    sameSite: true,\n                    maxAge: 86400\n                  });\n                  setCookie('user', userData, {\n                    path: '/',\n                    sameSite: true,\n                    maxAge: 86400\n                  });\n                }\n\n                router.push('/dashboard/pedidos');\n              })[\"catch\"](function (err) {\n                console.log(err);\n                alert('confira seus dados e tente novamente');\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function send(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var changeRemenber = function changeRemenber() {\n    setRemenber(!remenber);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sub-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"subscribe-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo\" // onClick={() => {\n          //   router.push('/')\n          // }}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"people\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/img/login/player.svg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"subscribe\",\n          children: [/*#__PURE__*/_jsxDEV(Heading, {\n            margin: \"50px 0 0 0\",\n            color: \"black\",\n            font: \"ubuntu\",\n            fontWeight: \"normal\",\n            fontSize: \"xxxmax\",\n            textAlign: \"right\",\n            lineBottom: false,\n            role: \"h2\",\n            children: \"Novo aqui?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/cadastro\",\n            fontWeight: \"semiBold\",\n            color: \"brown\",\n            font: \"ubuntu\",\n            fontSize: \"xxmax\",\n            textAlign: \"right\",\n            justify: \"flex-end\",\n            children: \"Fa\\xE7a seu cadastro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/img/logo3.png\",\n          alt: \"JG\",\n          className: \"logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Heading, {\n          color: \"white100\",\n          font: \"ubuntu\",\n          justify: \"center\",\n          fontWeight: \"bold\",\n          lineBottom: false,\n          fontSize: \"extra\",\n          margin: \"50px 0\",\n          children: \"BEM - VINDO!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: send,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login\",\n            children: /*#__PURE__*/_jsxDEV(Label, {\n              color: \"white100\",\n              font: \"ubuntu\",\n              fontWeight: \"semiBold\",\n              fontSize: \"large\",\n              children: [\"\\xA0 LOGIN\", /*#__PURE__*/_jsxDEV(Input, {\n                margin: \"10px 0\",\n                radius: 50,\n                height: 50,\n                borderColor: \"white100\",\n                value: login,\n                onChange: function onChange(e) {\n                  return setLogin(e.target.value.toLowerCase());\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"password\",\n            children: /*#__PURE__*/_jsxDEV(Label, {\n              color: \"white100\",\n              font: \"ubuntu\",\n              fontWeight: \"semiBold\",\n              fontSize: \"large\",\n              children: [\"\\xA0 SENHA\", /*#__PURE__*/_jsxDEV(Input, {\n                margin: \"10px 0\",\n                radius: 50,\n                height: 50,\n                borderColor: \"white100\",\n                value: password,\n                type: \"password\",\n                onChange: function onChange(e) {\n                  return setPassword(e.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"remenber\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"remenber\",\n              id: \"remenber-check-box\",\n              onChange: changeRemenber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, _this), \"\\xA0 \\xA0 lembrar\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"forgeted\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              href: \"/recuperar-senha\",\n              color: \"white100\",\n              font: \"ubuntu\",\n              fontSize: \"small\",\n              children: \"Esqueci minha senha\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"send\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              radius: 50,\n              fontSize: \"xlarge\",\n              fontWeight: \"semiBold\",\n              fill: \"yellow300\",\n              color: \"black\",\n              children: \"ENVIAR\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"subscribe-mobile\",\n        children: [\"Novo aqui?\", /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/cadastro\",\n          color: \"brown\",\n          fontSize: \"xlarge\",\n          fontWeight: \"semiBold\",\n          children: \"\\xA0 Se inscreva!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Login, \"WZOaZgOd/heHyV6WB76JzSy5oiw=\", false, function () {\n  return [useStateContext, useCookies, useRouter];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/cauezitto/Documents/projetos/JG/front-end/src/pages/login.tsx"],"names":["Button","Heading","Input","Label","Link","Container","useState","api","useStateContext","useRouter","useCookies","Login","login","setLogin","password","setPassword","remenber","setRemenber","token","setToken","setUser","cookie","setCookie","router","send","e","preventDefault","post","identifier","then","response","console","log","data","user","userData","username","email","phone","endereco","foto","url","favorites","favoritos","produtos","map","produto","id","jwt","path","maxAge","sameSite","push","err","alert","changeRemenber","target","value","toLowerCase"],"mappings":"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","sourcesContent":["import Button from 'components/Button'\nimport Heading from 'components/Heading'\nimport Input from 'components/Input'\nimport Label from 'components/Label'\nimport Link from 'components/Link'\nimport Image from 'next/image'\nimport Container from 'styles/pages/Login'\nimport { FormEvent, useState } from 'react'\nimport api from 'services/api'\nimport { useStateContext } from 'context'\nimport { useRouter } from 'next/router'\n\nimport { useCookies } from 'react-cookie'\nimport { ProductProps } from 'types/ProductProps'\n\nconst Login = () => {\n  const [login, setLogin] = useState('')\n  const [password, setPassword] = useState('')\n  const [remenber, setRemenber] = useState(false)\n  const { token, setToken, setUser } = useStateContext()\n  const [cookie, setCookie] = useCookies(['user'])\n  const router = useRouter()\n\n  const send = async (e: FormEvent) => {\n    e.preventDefault()\n    await api\n      .post('/auth/local', {\n        identifier: login,\n        password\n      })\n      .then((response) => {\n        console.log(response.data)\n        const { data } = response\n        const { user } = data\n\n        console.log(user)\n\n        const userData = {\n          username: user.username,\n          email: user.email,\n          phone: user.phone,\n          endereco: user.endereco,\n          foto: user.foto?.url,\n          favorites: user.favoritos.produtos.map(\n            (produto: ProductProps) => produto.id\n          )\n        }\n\n        setToken(data.jwt)\n        setUser(userData)\n        if (remenber) {\n          setCookie('token', data.jwt, {\n            path: '/',\n            maxAge: 604800, // Expires after 1hr\n            sameSite: true\n          })\n          setCookie('user', userData, {\n            path: '/',\n            maxAge: 604800, // Expires after 1hr\n            sameSite: true\n          })\n        } else {\n          setCookie('token', data.jwt, {\n            path: '/',\n            sameSite: true,\n            maxAge: 86400\n          })\n          setCookie('user', userData, {\n            path: '/',\n            sameSite: true,\n            maxAge: 86400\n          })\n        }\n        router.push('/dashboard/pedidos')\n      })\n      .catch((err) => {\n        console.log(err)\n        alert('confira seus dados e tente novamente')\n      })\n  }\n\n  const changeRemenber = () => {\n    setRemenber(!remenber)\n  }\n  return (\n    <Container>\n      <div className=\"sub-wrapper\">\n        <div className=\"subscribe-wrapper\">\n          <div\n            className=\"logo\"\n            // onClick={() => {\n            //   router.push('/')\n            // }}\n          >\n            {/* <Image src=\"/img/logo3.png\" height={40} width={140} /> */}\n          </div>\n          <div className=\"people\">\n            <img src=\"/img/login/player.svg\" />\n          </div>\n          <div className=\"subscribe\">\n            <Heading\n              margin=\"50px 0 0 0\"\n              color=\"black\"\n              font=\"ubuntu\"\n              fontWeight=\"normal\"\n              fontSize=\"xxxmax\"\n              textAlign=\"right\"\n              lineBottom={false}\n              role=\"h2\"\n            >\n              Novo aqui?\n            </Heading>\n\n            <Link\n              href=\"/cadastro\"\n              fontWeight=\"semiBold\"\n              color=\"brown\"\n              font=\"ubuntu\"\n              fontSize=\"xxmax\"\n              textAlign=\"right\"\n              justify=\"flex-end\"\n            >\n              Fa√ßa seu cadastro\n            </Link>\n          </div>\n        </div>\n\n        <div className=\"form-wrapper\">\n          <img src=\"/img/logo3.png\" alt=\"JG\" className=\"logo\" />\n          <Heading\n            color=\"white100\"\n            font=\"ubuntu\"\n            justify=\"center\"\n            fontWeight=\"bold\"\n            lineBottom={false}\n            fontSize=\"extra\"\n            margin=\"50px 0\"\n          >\n            BEM - VINDO!\n          </Heading>\n\n          <form onSubmit={send}>\n            <div className=\"login\">\n              <Label\n                color=\"white100\"\n                font=\"ubuntu\"\n                fontWeight=\"semiBold\"\n                fontSize=\"large\"\n              >\n                &nbsp; LOGIN\n                <Input\n                  margin=\"10px 0\"\n                  radius={50}\n                  height={50}\n                  borderColor=\"white100\"\n                  value={login}\n                  onChange={(e) => setLogin(e.target.value.toLowerCase())}\n                />\n              </Label>\n            </div>\n\n            <div className=\"password\">\n              <Label\n                color=\"white100\"\n                font=\"ubuntu\"\n                fontWeight=\"semiBold\"\n                fontSize=\"large\"\n              >\n                &nbsp; SENHA\n                <Input\n                  margin=\"10px 0\"\n                  radius={50}\n                  height={50}\n                  borderColor=\"white100\"\n                  value={password}\n                  type=\"password\"\n                  onChange={(e) => setPassword(e.target.value)}\n                />\n              </Label>\n            </div>\n\n            <div className=\"remenber\">\n              <input\n                type=\"checkbox\"\n                name=\"remenber\"\n                id=\"remenber-check-box\"\n                onChange={changeRemenber}\n              />\n              &nbsp; &nbsp; lembrar\n            </div>\n\n            <div className=\"forgeted\">\n              <Link\n                href=\"/recuperar-senha\"\n                color=\"white100\"\n                font=\"ubuntu\"\n                fontSize=\"small\"\n              >\n                Esqueci minha senha\n              </Link>\n            </div>\n\n            <div className=\"send\">\n              <Button\n                radius={50}\n                fontSize=\"xlarge\"\n                fontWeight=\"semiBold\"\n                fill=\"yellow300\"\n                color=\"black\"\n              >\n                ENVIAR\n              </Button>\n            </div>\n          </form>\n        </div>\n\n        <div className=\"subscribe-mobile\">\n          Novo aqui?\n          <Link\n            href=\"/cadastro\"\n            color=\"brown\"\n            fontSize=\"xlarge\"\n            fontWeight=\"semiBold\"\n          >\n            &nbsp; Se inscreva!\n          </Link>\n        </div>\n      </div>\n    </Container>\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}