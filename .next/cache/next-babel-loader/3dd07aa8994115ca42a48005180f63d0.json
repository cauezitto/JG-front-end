{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Heading from 'components/Heading';\nimport Container from 'styles/pages/Cadastro';\nimport Paragraph from 'components/Paragraph';\nimport Button from 'components/Button';\nimport Image from 'next/image';\nimport { FiFacebook } from 'react-icons/fi';\nimport { ImGooglePlus } from 'react-icons/im';\nimport Link from 'next/link';\nimport StyledLink from 'components/Link';\nimport Label from 'components/Label';\nimport Input from 'components/Input';\nimport { useState, useEffect } from 'react';\nimport api from 'services/api';\nimport { useStateContext } from 'context';\nimport { useRouter } from 'next/router';\nimport cep from 'cep-promise';\nimport { useCookies } from 'react-cookie';\nimport { cepMask } from 'utils/masks';\n\nvar Cadastro = function Cadastro() {\n  var _useState = useState(''),\n      nome = _useState[0],\n      setNome = _useState[1];\n\n  var _useState2 = useState(''),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(''),\n      phone = _useState3[0],\n      setPhone = _useState3[1];\n\n  var _useState4 = useState(''),\n      endereco = _useState4[0],\n      setEndereco = _useState4[1];\n\n  var _useState5 = useState(''),\n      street = _useState5[0],\n      setStreet = _useState5[1];\n\n  var _useState6 = useState(''),\n      neighborhood = _useState6[0],\n      setNeighborhood = _useState6[1];\n\n  var _useState7 = useState(''),\n      city = _useState7[0],\n      setCity = _useState7[1];\n\n  var _useState8 = useState(''),\n      number = _useState8[0],\n      setNumber = _useState8[1];\n\n  var _useState9 = useState(''),\n      state = _useState9[0],\n      setState = _useState9[1];\n\n  var _useState10 = useState(''),\n      password = _useState10[0],\n      setPassword = _useState10[1];\n\n  var _useStateContext = useStateContext(),\n      token = _useStateContext.token,\n      setToken = _useStateContext.setToken,\n      setUser = _useStateContext.setUser;\n\n  var _useCookies = useCookies(['user']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookie = _useCookies2[0],\n      setCookie = _useCookies2[1];\n\n  var _useState11 = useState(false),\n      error = _useState11[0],\n      setError = _useState11[1];\n\n  var router = useRouter();\n\n  var send = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(endereco.length < 8)) {\n                _context.next = 3;\n                break;\n              }\n\n              alert('cep incompleto');\n              return _context.abrupt(\"return\");\n\n            case 3:\n              if (!(nome === '' || email === '' || password === '' || phone === '' || endereco === '' || street === '' || neighborhood === '' || city === '' || number === '')) {\n                _context.next = 8;\n                break;\n              }\n\n              alert('dados incompletos');\n              return _context.abrupt(\"return\");\n\n            case 8:\n              if (!(endereco.length < 8)) {\n                _context.next = 13;\n                break;\n              }\n\n              alert('cep incompleto');\n              return _context.abrupt(\"return\");\n\n            case 13:\n              if (!error) {\n                _context.next = 16;\n                break;\n              }\n\n              alert('cep invalido, por favor confira seus dados');\n              return _context.abrupt(\"return\");\n\n            case 16:\n              _context.next = 18;\n              return api.post('/user', {\n                username: nome,\n                email: email,\n                password: password,\n                fone: phone,\n                endereco: {\n                  cep: endereco,\n                  rua: street,\n                  bairro: neighborhood,\n                  cidade: city,\n                  UF: state,\n                  numero: number\n                }\n              }).then(function (response) {\n                var _user$foto;\n\n                var data = response.data;\n                var user = data.user;\n                console.log(response.data);\n                var userData = {\n                  username: user.username,\n                  email: user.email,\n                  phone: user.phone,\n                  endereco: user.endereco,\n                  photo: (_user$foto = user.foto) === null || _user$foto === void 0 ? void 0 : _user$foto.url,\n                  favorites: user.favoritos.produtos.map(function (produto) {\n                    return produto.id;\n                  })\n                };\n                setToken(data.jwt);\n                setUser(userData);\n                setCookie('token', data.jwt, {\n                  path: '/',\n                  maxAge: 604800,\n                  // Expires after 1hr\n                  sameSite: true\n                });\n                setCookie('user', userData, {\n                  path: '/',\n                  maxAge: 604800,\n                  // Expires after 1hr\n                  sameSite: true\n                });\n                router.push('/dashboard/pedidos');\n              })[\"catch\"](function (err) {\n                console.log(err);\n              });\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function send() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var checkAddress = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setError(true);\n              _context2.next = 3;\n              return cep(endereco).then(function (response) {\n                var state = response.state,\n                    city = response.city,\n                    street = response.street,\n                    neighborhood = response.neighborhood;\n                setState(state);\n                setCity(city);\n                setStreet(street);\n                setNeighborhood(neighborhood);\n                setError(false);\n              })[\"catch\"](function () {\n                //console.log(err)\n                alert('cep invalido');\n                setError(true);\n              });\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function checkAddress() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (endereco.length === 8) {\n      checkAddress();\n    }\n  }, [endereco]);\n  return /*#__PURE__*/_jsx(Container, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"sub-container\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"go2login\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"content\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"logo-wrapper\",\n            onClick: function onClick() {\n              router.push('/');\n            },\n            children: /*#__PURE__*/_jsx(Image, {\n              src: \"/img/logo.webp\",\n              height: 40,\n              width: 140\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"text-wrapper\",\n            children: [/*#__PURE__*/_jsx(Heading, {\n              font: \"ubuntu\",\n              fontWeight: \"bold\",\n              fontSize: \"max\",\n              justify: \"center\",\n              lineBottom: false,\n              role: \"h2\",\n              children: \"Voc\\xEA por aqui! :)\"\n            }), /*#__PURE__*/_jsxs(Paragraph, {\n              fontWeight: \"semiBold\",\n              justify: \"center\",\n              textAlign: \"center\",\n              font: \"ubuntu\",\n              fontSize: \"large\",\n              margin: \"20px 0 30px 0\",\n              children: [\"Para se manter conectado conosco, \", /*#__PURE__*/_jsx(\"br\", {}), \" por favor fa\\xE7a seu login\"]\n            }), /*#__PURE__*/_jsx(Link, {\n              href: \"/login\",\n              passHref: true,\n              children: /*#__PURE__*/_jsx(\"a\", {\n                children: /*#__PURE__*/_jsx(Button, {\n                  radius: 50,\n                  fontSize: \"large\",\n                  fontWeight: \"semiBold\",\n                  outline: true,\n                  color: \"black\",\n                  children: \"LOGIN\"\n                })\n              })\n            })]\n          }), \"\\xA0\"]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"go2login-mobile-wrapper\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"go2login-mobile\",\n          children: [\"Voc\\xEA por aqui! :) \\xA0\", /*#__PURE__*/_jsx(StyledLink, {\n            href: \"/login\",\n            color: \"white100\",\n            fontSize: \"xlarge\",\n            fontWeight: \"semiBold\",\n            children: \"Login\"\n          })]\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"register-wrapper\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"title\",\n          children: /*#__PURE__*/_jsx(Heading, {\n            justify: \"center\",\n            color: \"white100\",\n            fontSize: \"max\",\n            margin: \"0\",\n            lineBottom: false,\n            children: \"Fa\\xE7a seu cadastro\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"icons\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"icon-wrapper\",\n            children: /*#__PURE__*/_jsx(FiFacebook, {})\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"icon-wrapper\",\n            children: /*#__PURE__*/_jsx(ImGooglePlus, {})\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"text\",\n          children: /*#__PURE__*/_jsx(Paragraph, {\n            justify: \"center\",\n            textAlign: \"center\",\n            font: \"ubuntu\",\n            fontSize: \"xlarge\",\n            children: \"ou use seu email para se registrar\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"name\",\n          children: /*#__PURE__*/_jsxs(Label, {\n            color: \"white100\",\n            fontWeight: \"bold\",\n            fontSize: \"large\",\n            children: [\"\\xA0 NOME\", /*#__PURE__*/_jsx(Input, {\n              radius: 50,\n              height: 45,\n              value: nome,\n              borderColor: \"white100\",\n              onChange: function onChange(e) {\n                return setNome(e.target.value);\n              }\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"email\",\n          children: /*#__PURE__*/_jsxs(Label, {\n            color: \"white100\",\n            fontWeight: \"bold\",\n            fontSize: \"large\",\n            children: [\"\\xA0 EMAIL\", /*#__PURE__*/_jsx(Input, {\n              radius: 50,\n              height: 45,\n              value: email,\n              borderColor: \"white100\",\n              onChange: function onChange(e) {\n                return setEmail(e.target.value);\n              }\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"phone\",\n          children: /*#__PURE__*/_jsxs(Label, {\n            color: \"white100\",\n            fontWeight: \"bold\",\n            fontSize: \"large\",\n            children: [\"\\xA0 CELULAR\", /*#__PURE__*/_jsx(Input, {\n              radius: 50,\n              height: 45,\n              borderColor: \"white100\",\n              value: phone,\n              onChange: function onChange(e) {\n                return setPhone(e.target.value);\n              }\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"address\",\n          children: /*#__PURE__*/_jsxs(Label, {\n            color: \"white100\",\n            fontWeight: \"bold\",\n            fontSize: \"large\",\n            children: [\"\\xA0 CEP\", /*#__PURE__*/_jsx(Input, {\n              radius: 50,\n              height: 45,\n              borderColor: \"white100\",\n              value: endereco,\n              onChange: function onChange(e) {\n                return setEndereco(cepMask(e.target.value));\n              },\n              maxLength: 8\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"number\",\n          children: /*#__PURE__*/_jsxs(Label, {\n            color: \"white100\",\n            fontWeight: \"bold\",\n            fontSize: \"large\",\n            children: [\"\\xA0 N\\xB0\", /*#__PURE__*/_jsx(Input, {\n              radius: 50,\n              height: 45,\n              borderColor: \"white100\",\n              value: number,\n              onChange: function onChange(e) {\n                return setNumber(e.target.value);\n              },\n              maxLength: 8\n            })]\n          })\n        }), street !== '' && /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"street\",\n            children: /*#__PURE__*/_jsxs(Label, {\n              color: \"white100\",\n              fontWeight: \"bold\",\n              fontSize: \"large\",\n              children: [\"\\xA0 ENDERE\\xC7O\", /*#__PURE__*/_jsx(Input, {\n                radius: 50,\n                height: 45,\n                borderColor: \"white100\",\n                value: \"\".concat(street, \",  \").concat(neighborhood, \",  \").concat(city, \",  \").concat(state),\n                readOnly: true,\n                maxLength: 8\n              })]\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"password\",\n          children: /*#__PURE__*/_jsxs(Label, {\n            color: \"white100\",\n            fontWeight: \"bold\",\n            fontSize: \"large\",\n            children: [\"\\xA0 SENHA\", /*#__PURE__*/_jsx(Input, {\n              radius: 50,\n              height: 45,\n              borderColor: \"white100\",\n              value: password,\n              onChange: function onChange(e) {\n                return setPassword(e.target.value);\n              }\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"send\",\n          children: /*#__PURE__*/_jsx(Button, {\n            radius: 50,\n            fill: \"red100\",\n            fontSize: \"xlarge\",\n            onClick: send,\n            children: \"ENVIAR\"\n          })\n        })]\n      })]\n    })\n  });\n};\n\nexport default Cadastro;","map":null,"metadata":{},"sourceType":"module"}