{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Button from 'components/Button';\nimport Heading from 'components/Heading';\nimport Input from 'components/Input';\nimport Label from 'components/Label';\nimport Link from 'components/Link';\nimport Container from 'styles/pages/Login';\nimport { useState } from 'react';\nimport api from 'services/api';\nimport { useStateContext } from 'context';\nimport { useRouter } from 'next/router';\nimport { useCookies } from 'react-cookie';\n\nvar Login = function Login() {\n  var _useState = useState(''),\n      login = _useState[0],\n      setLogin = _useState[1];\n\n  var _useState2 = useState(''),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useState3 = useState(false),\n      remenber = _useState3[0],\n      setRemenber = _useState3[1];\n\n  var _useStateContext = useStateContext(),\n      token = _useStateContext.token,\n      setToken = _useStateContext.setToken,\n      setUser = _useStateContext.setUser;\n\n  var _useCookies = useCookies(['user']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookie = _useCookies2[0],\n      setCookie = _useCookies2[1];\n\n  var router = useRouter();\n\n  var send = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return api.post('/auth/local', {\n                identifier: login,\n                password: password\n              }).then(function (response) {\n                var _user$foto;\n\n                console.log(response.data);\n                var data = response.data;\n                var user = data.user;\n                console.log(user);\n                var userData = {\n                  username: user.username,\n                  email: user.email,\n                  phone: user.phone,\n                  endereco: user.endereco,\n                  foto: (_user$foto = user.foto) === null || _user$foto === void 0 ? void 0 : _user$foto.url,\n                  favorites: user.favoritos.produtos.map(function (produto) {\n                    return produto.id;\n                  })\n                };\n                setToken(data.jwt);\n                setUser(userData);\n\n                if (remenber) {\n                  setCookie('token', data.jwt, {\n                    path: '/',\n                    maxAge: 604800,\n                    // Expires after 1hr\n                    sameSite: true\n                  });\n                  setCookie('user', userData, {\n                    path: '/',\n                    maxAge: 604800,\n                    // Expires after 1hr\n                    sameSite: true\n                  });\n                } else {\n                  setCookie('token', data.jwt, {\n                    path: '/',\n                    sameSite: true,\n                    maxAge: 86400\n                  });\n                  setCookie('user', userData, {\n                    path: '/',\n                    sameSite: true,\n                    maxAge: 86400\n                  });\n                }\n\n                router.push('/dashboard/pedidos');\n              })[\"catch\"](function (err) {\n                console.log(err);\n                alert('confira seus dados e tente novamente');\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function send(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var changeRemenber = function changeRemenber() {\n    setRemenber(!remenber);\n  };\n\n  return /*#__PURE__*/_jsx(Container, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"sub-wrapper\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"subscribe-wrapper\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"logo\" // onClick={() => {\n          //   router.push('/')\n          // }}\n\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"people\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"/img/login/player.svg\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"subscribe\",\n          children: [/*#__PURE__*/_jsx(Heading, {\n            margin: \"50px 0 0 0\",\n            color: \"black\",\n            font: \"ubuntu\",\n            fontWeight: \"normal\",\n            fontSize: \"xxxmax\",\n            textAlign: \"right\",\n            lineBottom: false,\n            role: \"h2\",\n            children: \"Novo aqui?\"\n          }), /*#__PURE__*/_jsx(Link, {\n            href: \"/cadastro\",\n            fontWeight: \"semiBold\",\n            color: \"brown\",\n            font: \"ubuntu\",\n            fontSize: \"xxmax\",\n            textAlign: \"right\",\n            justify: \"flex-end\",\n            children: \"Fa\\xE7a seu cadastro\"\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-wrapper\",\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          src: \"/img/logo3.png\",\n          alt: \"JG\",\n          className: \"logo\"\n        }), /*#__PURE__*/_jsx(Heading, {\n          color: \"white100\",\n          font: \"ubuntu\",\n          justify: \"center\",\n          fontWeight: \"bold\",\n          lineBottom: false,\n          fontSize: \"extra\",\n          margin: \"50px 0\",\n          children: \"BEM - VINDO!\"\n        }), /*#__PURE__*/_jsxs(\"form\", {\n          onSubmit: send,\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"login\",\n            children: /*#__PURE__*/_jsxs(Label, {\n              color: \"white100\",\n              font: \"ubuntu\",\n              fontWeight: \"semiBold\",\n              fontSize: \"large\",\n              children: [\"\\xA0 LOGIN\", /*#__PURE__*/_jsx(Input, {\n                margin: \"10px 0\",\n                radius: 50,\n                height: 50,\n                borderColor: \"white100\",\n                value: login,\n                onChange: function onChange(e) {\n                  return setLogin(e.target.value.toLowerCase());\n                }\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"password\",\n            children: /*#__PURE__*/_jsxs(Label, {\n              color: \"white100\",\n              font: \"ubuntu\",\n              fontWeight: \"semiBold\",\n              fontSize: \"large\",\n              children: [\"\\xA0 SENHA\", /*#__PURE__*/_jsx(Input, {\n                margin: \"10px 0\",\n                radius: 50,\n                height: 50,\n                borderColor: \"white100\",\n                value: password,\n                type: \"password\",\n                onChange: function onChange(e) {\n                  return setPassword(e.target.value);\n                }\n              })]\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"remenber\",\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              type: \"checkbox\",\n              name: \"remenber\",\n              id: \"remenber-check-box\",\n              onChange: changeRemenber\n            }), \"\\xA0 \\xA0 lembrar\"]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"forgeted\",\n            children: /*#__PURE__*/_jsx(Link, {\n              href: \"/recuperar-senha\",\n              color: \"white100\",\n              font: \"ubuntu\",\n              fontSize: \"small\",\n              children: \"Esqueci minha senha\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"send\",\n            children: /*#__PURE__*/_jsx(Button, {\n              radius: 50,\n              fontSize: \"xlarge\",\n              fontWeight: \"semiBold\",\n              fill: \"yellow300\",\n              color: \"black\",\n              children: \"ENVIAR\"\n            })\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"subscribe-mobile\",\n        children: [\"Novo aqui?\", /*#__PURE__*/_jsx(Link, {\n          href: \"/cadastro\",\n          color: \"brown\",\n          fontSize: \"xlarge\",\n          fontWeight: \"semiBold\",\n          children: \"\\xA0 Se inscreva!\"\n        })]\n      })]\n    })\n  });\n};\n\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}